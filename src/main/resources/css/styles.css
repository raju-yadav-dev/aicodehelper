.root {
    -fx-font-family: "Segoe UI", "Inter", sans-serif;
}

/* ================= BASE TOKENS / DEFAULTS ================= */
.window-root {
    -app-bg: rgba(10, 14, 28, 0.78);
    -app-surface: rgba(19, 24, 39, 0.72);
    -app-border: rgba(94, 114, 164, 0.46);
    -app-separator: #000000;
    -app-accent: #2f81f7;
    -app-accent-soft: rgba(47, 129, 247, 0.62);
    -app-accent-hover: #1f6feb;
    -app-accent-pressed: #1158c7;
    -app-text-primary: #e6edf3;
    -app-text-secondary: #8b949e;
    -app-muted-hover: rgba(139, 148, 158, 0.22);
    -fx-accent: -app-accent;
    -fx-background-color: transparent;
    -fx-padding: 10;
}

/* ================= DARK THEME ================= */
.window-root.theme-dark {
    /* surfaces */
    -app-bg: rgba(11, 16, 32, 0.82);
    -app-surface: rgba(20, 27, 51, 0.66);
    -app-surface-elevated: rgba(30, 41, 74, 0.74);
    -app-border: rgba(181, 192, 230, 0.34);
    -app-separator: #000000;

    /* accent */
    -app-accent: #5b8cff;
    -app-accent-soft: rgba(91, 140, 255, 0.66);
    -app-accent-hover: #7aa2ff;
    -app-accent-pressed: #3f6fe0;

    /* text */
    -app-text-primary: #eaf0ff;
    -app-text-secondary: rgba(181, 192, 230, 0.92);
    -app-text-muted: rgba(181, 192, 230, 0.72);

    /* states */
    -app-muted-hover: rgba(181, 192, 230, 0.18);
    -app-focus-ring: rgba(91, 140, 255, 0.40);
}

/* Dark theme glass + shadow buttons (same behavior as light mode) */
.window-root.theme-dark .button,
.window-root.theme-dark .menu-button {
    -fx-background-color:
        linear-gradient(to bottom, rgba(73, 94, 156, 0.72), rgba(30, 41, 74, 0.72)),
        rgba(20, 27, 51, 0.74);
    -fx-background-insets: 0, 0;
    -fx-background-radius: 999;
    -fx-border-color: rgba(181, 192, 230, 0.30);
    -fx-border-width: 1;
    -fx-border-radius: 999;
    -fx-text-fill: #eaf0ff;
    -fx-effect: dropshadow(gaussian, rgba(3, 6, 18, 0.72), 18, 0.24, 0, 6);
}

.window-root.theme-dark .menu-button .label {
    -fx-text-fill: #eaf0ff;
}

.window-root.theme-dark .button:hover,
.window-root.theme-dark .menu-button:hover {
    -fx-background-color:
        linear-gradient(to bottom, rgba(122, 162, 255, 0.74), rgba(73, 94, 156, 0.72)),
        rgba(30, 41, 74, 0.78);
    -fx-border-color: rgba(181, 192, 230, 0.46);
    -fx-effect: dropshadow(gaussian, rgba(3, 6, 18, 0.80), 22, 0.28, 0, 7);
}

.window-root.theme-dark .button:pressed,
.window-root.theme-dark .menu-button:showing {
    -fx-background-color:
        linear-gradient(to bottom, rgba(63, 111, 224, 0.76), rgba(30, 41, 74, 0.74)),
        rgba(20, 27, 51, 0.76);
    -fx-border-color: rgba(181, 192, 230, 0.32);
    -fx-effect: innershadow(gaussian, rgba(234, 240, 255, 0.16), 10, 0.2, 0, 1);
}

.window-root.theme-dark .chat-history-list .list-cell {
    -fx-background-color:
        linear-gradient(to bottom, rgba(73, 94, 156, 0.66), rgba(30, 41, 74, 0.68)),
        rgba(20, 27, 51, 0.70);
    -fx-background-insets: 5 0 5 0;
    -fx-border-color: rgba(181, 192, 230, 0.32);
    -fx-border-width: 1;
    -fx-border-insets: 5 0 5 0;
    -fx-background-radius: 12;
    -fx-border-radius: 12;
    -fx-text-fill: #eaf0ff;
    -fx-padding: 0 8 0 8;
    -fx-effect: dropshadow(gaussian, rgba(3, 6, 18, 0.72), 18, 0.24, 0, 6);
}

.window-root.theme-dark .chat-history-list .list-cell:empty {
    -fx-background-color: transparent;
    -fx-border-color: transparent;
    -fx-effect: null;
    -fx-padding: 0;
}

.window-root.theme-dark .chat-history-list .list-cell:filled:hover {
    -fx-background-color:
        linear-gradient(to bottom, rgba(122, 162, 255, 0.72), rgba(73, 94, 156, 0.70)),
        rgba(30, 41, 74, 0.76);
    -fx-border-color: rgba(181, 192, 230, 0.44);
    -fx-effect: dropshadow(gaussian, rgba(3, 6, 18, 0.80), 22, 0.28, 0, 7);
}

.window-root.theme-dark .chat-history-list .list-cell:filled:selected,
.window-root.theme-dark .chat-history-list .list-cell:filled:selected:focused {
    -fx-background-color:
        linear-gradient(to bottom, rgba(63, 111, 224, 0.76), rgba(30, 41, 74, 0.74)),
        rgba(20, 27, 51, 0.74);
    -fx-border-color: rgba(181, 192, 230, 0.34);
    -fx-effect: innershadow(gaussian, rgba(234, 240, 255, 0.16), 10, 0.2, 0, 1);
}

/* ================= LIGHT THEME ================= */
.window-root.theme-light {
    /* surfaces */
    -app-bg: rgba(255, 255, 255, 0.10);
    -app-surface: rgba(255, 255, 255, 0.16);
    -app-surface-elevated: rgba(255, 255, 255, 0.24);
    -app-border: rgba(255, 255, 255, 0.42);
    -app-separator: #ffffff;

    /* accent */
    -app-accent: #2da44e;
    -app-accent-soft: rgba(45, 164, 78, 0.62);
    -app-accent-hover: #2c974b;
    -app-accent-pressed: #298e46;

    /* text */
    -app-text-primary: #f8fafc;
    -app-text-secondary: rgba(248, 250, 252, 0.86);
    -app-text-muted: rgba(248, 250, 252, 0.72);

    /* states */
    -app-muted-hover: rgba(87, 96, 106, 0.15);
    -app-focus-ring: rgba(45, 164, 78, 0.35);
    -fx-background-color: transparent;
}

.window-root.theme-light .app-shell {
    -fx-background-color:
        linear-gradient(to bottom right, rgba(255, 255, 255, 0.10), rgba(255, 255, 255, 0.08)),
        radial-gradient(focus-angle 0deg, focus-distance 0%, center 14% 28%, radius 33%, rgba(255, 137, 150, 0.78), rgba(255, 137, 150, 0)),
        radial-gradient(focus-angle 0deg, focus-distance 0%, center 84% 18%, radius 36%, rgba(255, 186, 111, 0.82), rgba(255, 186, 111, 0)),
        radial-gradient(focus-angle 0deg, focus-distance 0%, center 72% 66%, radius 44%, rgba(104, 105, 255, 0.76), rgba(104, 105, 255, 0)),
        radial-gradient(focus-angle 0deg, focus-distance 0%, center 28% 84%, radius 42%, rgba(204, 95, 205, 0.70), rgba(204, 95, 205, 0)),
        linear-gradient(to bottom right, #c66c92 0%, #b27ca2 25%, #8e6ac8 58%, #6a68e6 100%);
    -fx-background-insets: 0;
    -fx-background-radius: 16;
    -fx-border-color: rgba(255, 255, 255, 0.40);
    -fx-effect: dropshadow(gaussian, rgba(7, 10, 24, 0.28), 34, 0.22, 0, 10);
}

.window-root.theme-light .app-shell.maximized {
    -fx-background-radius: 0;
}

.window-root.theme-light .app-root,
.window-root.theme-light .content-root,
.window-root.theme-light .chat-root,
.window-root.theme-light .chat-main,
.window-root.theme-light .messages-scroll,
.window-root.theme-light .messages-scroll > .viewport,
.window-root.theme-light .messages-scroll .corner,
.window-root.theme-light .list-view,
.window-root.theme-light .list-view .viewport,
.window-root.theme-light .list-view .corner {
    -fx-background-color: transparent;
}

.window-root.theme-light .sidebar,
.window-root.theme-light .title-bar,
.window-root.theme-light .bot-bubble,
.window-root.theme-light .input-shell,
.window-root.theme-light .context-menu,
.window-root.theme-light .new-chat-button {
    -fx-background-color: rgba(255, 255, 255, 0.16);
    -fx-border-color: rgba(255, 255, 255, 0.38);
}

.window-root.theme-light .user-bubble {
    -fx-background-color: rgba(255, 255, 255, 0.26);
    -fx-border-color: rgba(255, 255, 255, 0.34);
    -fx-border-width: 1;
    -fx-border-radius: 14;
}

/* Light theme glass buttons */
.window-root.theme-light .settings-button,
.window-root.theme-light .new-chat-button,
.window-root.theme-light .chat-history-list .list-cell {
    -fx-background-color:
        linear-gradient(to bottom, rgba(255, 255, 255, 0.34), rgba(255, 255, 255, 0.16)),
        rgba(255, 255, 255, 0.14);
    -fx-background-insets: 0, 0;
    -fx-border-color: rgba(255, 255, 255, 0.42);
    -fx-border-width: 1;
    -fx-effect: dropshadow(gaussian, rgba(14, 18, 35, 0.20), 16, 0.22, 0, 5);
}

.window-root.theme-light .settings-button {
    -fx-background-radius: 10;
    -fx-border-radius: 10;
}

.window-root.theme-light .new-chat-button {
    -fx-background-radius: 12;
    -fx-border-radius: 12;
}

.window-root.theme-light .chat-history-list .list-cell {
    -fx-background-radius: 12;
    -fx-border-radius: 12;
    -fx-text-fill: rgba(248, 250, 252, 0.95);
    -fx-background-insets: 5 0 5 0;
    -fx-border-insets: 5 0 5 0;
    -fx-padding: 0 8 0 8;
}

.window-root.theme-light .chat-history-list {
    -fx-padding: 10 2 10 2;
}

.window-root.theme-light .chat-history-list .list-cell:empty {
    -fx-background-color: transparent;
    -fx-border-color: transparent;
    -fx-effect: null;
    -fx-padding: 0;
}

/* Apply glass + soft shadow to all light theme buttons */
.window-root.theme-light .button,
.window-root.theme-light .menu-button {
    -fx-background-color:
        linear-gradient(to bottom, rgba(255, 255, 255, 0.34), rgba(255, 255, 255, 0.16)),
        rgba(255, 255, 255, 0.14);
    -fx-background-insets: 0, 0;
    -fx-background-radius: 999;
    -fx-border-color: rgba(255, 255, 255, 0.42);
    -fx-border-width: 1;
    -fx-border-radius: 999;
    -fx-text-fill: rgba(248, 250, 252, 0.96);
    -fx-effect: dropshadow(gaussian, rgba(14, 18, 35, 0.20), 16, 0.22, 0, 5);
}

.window-root.theme-light .menu-button .label {
    -fx-text-fill: rgba(248, 250, 252, 0.96);
}

.window-root.theme-light .button:hover,
.window-root.theme-light .menu-button:hover {
    -fx-background-color:
        linear-gradient(to bottom, rgba(255, 255, 255, 0.46), rgba(255, 255, 255, 0.22)),
        rgba(255, 255, 255, 0.18);
    -fx-border-color: rgba(255, 255, 255, 0.58);
    -fx-effect: dropshadow(gaussian, rgba(14, 18, 35, 0.24), 20, 0.24, 0, 6);
}

.window-root.theme-light .button:pressed,
.window-root.theme-light .menu-button:showing {
    -fx-background-color:
        linear-gradient(to bottom, rgba(255, 255, 255, 0.24), rgba(255, 255, 255, 0.14)),
        rgba(255, 255, 255, 0.12);
    -fx-border-color: rgba(255, 255, 255, 0.44);
    -fx-effect: innershadow(gaussian, rgba(255, 255, 255, 0.26), 10, 0.2, 0, 1);
}

.window-root.theme-light .settings-button:hover,
.window-root.theme-light .new-chat-button:hover,
.window-root.theme-light .chat-history-list .list-cell:filled:hover {
    -fx-background-color:
        linear-gradient(to bottom, rgba(255, 255, 255, 0.46), rgba(255, 255, 255, 0.22)),
        rgba(255, 255, 255, 0.18);
    -fx-border-color: rgba(255, 255, 255, 0.58);
    -fx-effect: dropshadow(gaussian, rgba(14, 18, 35, 0.24), 20, 0.24, 0, 6);
}

.window-root.theme-light .settings-button:pressed,
.window-root.theme-light .new-chat-button:pressed,
.window-root.theme-light .chat-history-list .list-cell:filled:selected,
.window-root.theme-light .chat-history-list .list-cell:filled:selected:focused {
    -fx-background-color:
        linear-gradient(to bottom, rgba(255, 255, 255, 0.24), rgba(255, 255, 255, 0.14)),
        rgba(255, 255, 255, 0.12);
    -fx-border-color: rgba(255, 255, 255, 0.44);
    -fx-effect: innershadow(gaussian, rgba(255, 255, 255, 0.26), 10, 0.2, 0, 1);
}

/* Light mode blob gradient background */
.window-root.maximized {
    -fx-padding: 0;
}

/* ================= WINDOW SHELL ================= */
.app-shell {
    -fx-background-color: -app-bg;
    -fx-background-radius: 16;
    -fx-border-color: -app-border;
    -fx-border-width: 1;
    -fx-border-radius: 16;
    -fx-effect: dropshadow(gaussian, rgba(2, 6, 23, 0.6), 24, 0.2, 0, 10);
}

.app-shell.maximized {
    -fx-background-radius: 0;
    -fx-border-radius: 0;
}

/* ================= TITLE BAR / WINDOW CONTROLS ================= */
.title-bar {
    -fx-background-color: -app-surface;
    -fx-border-color: transparent;
    -fx-border-width: 0;
}

.titlebar-label {
    -fx-text-fill: -app-text-primary;
    -fx-font-size: 13px;
    -fx-font-weight: 600;
    -fx-padding: 0 0 0 4;
}

.window-controls {
    -fx-background-color: transparent;
    -fx-alignment: center-right;
    -fx-font-size: 1em;
    -fx-font-weight: 800;
}

.settings-button {
    -fx-background-color: -app-surface;
    -fx-border-color: -app-border;
    -fx-border-width: 1;
    -fx-border-radius: 8;
    -fx-background-radius: 8;
    -fx-text-fill: -app-text-primary;
    -fx-font-size: 12px;
    -fx-font-weight: 600;
    -fx-padding: 6 10 6 10;
    -fx-cursor: hand;
}

.settings-button:hover {
    -fx-background-color: -app-muted-hover;
}

.settings-button:showing {
    -fx-background-color: -app-muted-hover;
}

.settings-button .label {
    -fx-text-fill: -app-text-primary;
}

.context-menu {
    -fx-background-color: -app-surface;
    -fx-border-color: -app-border;
    -fx-border-width: 1;
    -fx-background-radius: 8;
    -fx-border-radius: 8;
}

.menu-item,
.radio-menu-item {
    -fx-background-color: transparent;
}

.menu-item .label,
.radio-menu-item .label {
    -fx-text-fill: -app-text-primary;
}

.menu-item:focused,
.radio-menu-item:focused {
    -fx-background-color: -app-muted-hover;
}

.title-control {
    -fx-min-width: 52;
    -fx-pref-width: 52;
    -fx-min-height: 34;
    -fx-pref-height: 34;
    -fx-background-color: transparent;
    -fx-background-insets: 0;
    -fx-text-fill: -app-text-primary;
    -fx-font-size: 13px;
    -fx-font-weight: 600;
    -fx-background-radius: 8;
    -fx-border-radius: 8;
    -fx-cursor: hand;
    -fx-border-color: transparent;
    -fx-border-width: 0;
    -fx-focus-color: transparent;
    -fx-faint-focus-color: transparent;
}

.title-control:hover {
    -fx-background-color: -app-muted-hover;
    -fx-text-fill: -app-text-primary;
}

.title-control:pressed {
    -fx-background-color: -app-muted-hover;
}

.title-control:focused {
    -fx-background-color: transparent;
}

.close-control {
    -fx-background-color: transparent, transparent, transparent;
    -fx-background-insets: 0, 0, 0;
    -fx-background-radius: 8, 8, 8;
    -fx-border-color: transparent;
    -fx-border-width: 0;
}

.close-control:focused,
.close-control:armed {
    -fx-background-color: transparent, transparent, transparent;
    -fx-background-insets: 0, 0, 0;
}

.close-control:hover {
    -fx-background-color: transparent, transparent, transparent;
    -fx-text-fill: -app-text-primary;
}

.close-control:pressed {
    -fx-background-color: transparent, transparent, transparent;
}

/* ================= APP LAYOUT ================= */
.app-root,
.content-root,
.chat-root,
.chat-main {
    -fx-background-color: -app-bg;
}

/* ================= SIDEBAR / CHAT LIST ================= */
.sidebar {
    -fx-min-width: 220;
    -fx-pref-width: 260;
    -fx-background-color: -app-surface;
    -fx-border-color: transparent;
    -fx-border-width: 0;
}

.new-chat-button {
    -fx-min-width: 220;
    -fx-pref-width: 220;
    -fx-max-width: Infinity;
    -fx-background-color: -app-surface-elevated;
    -fx-border-color: transparent;
    -fx-border-width: 0;
    -fx-border-radius: 12;
    -fx-background-radius: 12;
    -fx-text-fill: -app-text-primary;
    -fx-font-size: 13px;
    -fx-font-weight: 600;
    -fx-alignment: center;
    -fx-padding: 10 14 10 14;
    -fx-cursor: hand;
    -fx-focus-color: transparent;
    -fx-faint-focus-color: transparent;
}

/* Start New Chat button only */
#new-chat-create-button {
    -fx-pref-width: 180;
    -fx-pref-height: 40;
}

.new-chat-button:hover {
    -fx-background-color: -app-muted-hover;
    -fx-border-color: transparent;
}

.new-chat-button:pressed {
    -fx-background-color: -app-muted-hover;
}

.list-view {
    -fx-background-color: -app-bg;
    -fx-control-inner-background: transparent;
    -fx-border-color: transparent;
    -fx-border-width: 0;
    -fx-border-radius: 12;
    -fx-background-radius: 12;
    -fx-padding: 8 2 8 2;
}

.list-view .viewport,
.list-view .corner {
    -fx-background-color: transparent;
}

.list-cell {
    -fx-background-color: transparent;
    -fx-text-fill: -app-text-secondary;
    -fx-font-size: 13px;
    -fx-padding: 10 12 10 12;
    -fx-background-insets: 2 0 2 0;
    -fx-background-radius: 10;
}

.list-cell:empty {
    -fx-background-color: transparent;
    -fx-padding: 0;
}

.list-cell:filled:hover {
    -fx-background-color: -app-muted-hover;
    -fx-text-fill: -app-text-primary;
}

.list-cell:filled:selected,
.list-cell:filled:selected:focused {
    -fx-background-color: -app-muted-hover;
    -fx-text-fill: -app-text-primary;
    -fx-border-color: transparent;
    -fx-border-width: 0;
}

/* History list rows like "New Chat" */
.chat-history-list .list-cell {
    -fx-alignment: center;
    -fx-text-alignment: center;
    -fx-padding: 0;
    -fx-pref-height: 42;
}

/* ================= MESSAGE AREA ================= */
.messages-scroll {
    -fx-background-color: transparent;
    -fx-border-color: transparent;
    -fx-padding: 0 2 0 2;
}

.messages-scroll > .viewport,
.messages-scroll .corner {
    -fx-background-color: transparent;
}

.messages-list {
    -fx-fill-width: true;
}

.message-row {
    -fx-padding: 3 0 3 0;
}

.message-bubble {
    -fx-background-radius: 14;
    -fx-padding: 11 14 11 14;
    -fx-max-width: 560;
}

.bot-bubble {
    -fx-background-color: -app-surface;
    -fx-border-color: -app-border;
    -fx-border-width: 1;
    -fx-border-radius: 14;
}

.user-bubble {
    -fx-background-color: -app-accent-soft;
}

.message-text {
    -fx-text-fill: -app-text-primary;
    -fx-font-size: 14px;
    -fx-line-spacing: 1px;
}

/* ================= COMPOSER / INPUT ================= */
.composer-host {
    -fx-background-color: transparent;
}

.input-shell {
    -fx-background-color: -app-surface;
    -fx-border-color: linear-gradient(to right, #3b82f6 0%, #7c3aed 25%, #ec4899 50%, #ef4444 75%, #22c55e 100%);
    -fx-border-width: 1;
    -fx-border-radius: 999;
    -fx-background-radius: 999;
    -fx-padding: 10 12 10 14;
    -fx-effect: dropshadow(gaussian, rgba(124, 58, 237, 0.18), 10, 0.2, 0, 0);
}

.input-shell:hover {
    -fx-effect: dropshadow(gaussian, rgba(236, 72, 153, 0.28), 14, 0.24, 0, 0);
}

.input-shell.input-focused {
    -fx-border-width: 1.4;
    -fx-effect: dropshadow(gaussian, rgba(168, 85, 247, 0.45), 22, 0.28, 0, 0);
}

.text-area {
    -fx-font-size: 14px;
    -fx-padding: 0;
    -fx-background-color: transparent;
    -fx-background-insets: 0;
    -fx-border-color: transparent;
    -fx-text-fill: -app-text-primary;
    -fx-highlight-fill: -app-accent;
    -fx-highlight-text-fill: #ffffff;
    -fx-prompt-text-fill: -app-text-secondary;
}

.text-area .content {
    -fx-background-color: transparent;
    -fx-background-insets: 0;
    -fx-padding: 0;
}

.text-area .viewport,
.text-area .scroll-pane,
.text-area .scroll-pane .viewport,
.text-area .scroll-pane .content {
    -fx-background-color: transparent;
    -fx-background-insets: 0;
}

.input-shell .text-area .scroll-bar:vertical {
    -fx-background-color: transparent;
    -fx-pref-width: 12;
    -fx-padding: 2 0 2 0;
}

.input-shell .text-area .scroll-bar:vertical .track {
    -fx-background-color: rgba(148, 163, 184, 0.25);
    -fx-background-radius: 999;
    -fx-border-radius: 999;
}

.input-shell .text-area .scroll-bar:vertical .thumb {
    -fx-background-color: #94a3b8;
    -fx-background-insets: 1;
    -fx-background-radius: 999;
    -fx-border-radius: 999;
}

.input-shell .text-area .scroll-bar:vertical .thumb:hover {
    -fx-background-color: #a6b4c8;
}

.input-shell .text-area .scroll-bar:vertical .increment-button,
.input-shell .text-area .scroll-bar:vertical .decrement-button,
.input-shell .text-area .scroll-bar:vertical .increment-arrow,
.input-shell .text-area .scroll-bar:vertical .decrement-arrow {
    -fx-padding: 0;
    -fx-opacity: 0;
    -fx-background-color: transparent;
}

.text-area:focused {
    -fx-background-color: transparent;
    -fx-border-color: transparent;
}

/* ================= SEND BUTTON ================= */
.send-button {
    -fx-min-width: 36;
    -fx-pref-width: 36;
    -fx-min-height: 36;
    -fx-pref-height: 36;
    -fx-background-radius: 999;
    -fx-background-color: -app-accent-soft;
    -fx-text-fill: #ffffff;
    -fx-font-size: 16px;
    -fx-font-weight: 700;
    -fx-padding: 0;
    -fx-cursor: hand;
}

.send-button:hover {
    -fx-background-color: -app-accent-hover;
}

.send-button:pressed {
    -fx-background-color: -app-accent-pressed;
}

.send-button:disabled {
    -fx-background-color: #334155;
    -fx-text-fill: #94a3b8;
    -fx-opacity: 1;
}
